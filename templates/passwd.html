<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOCCC Change Password</title>
    <meta name="description" content="Change your IOCCC Password">
    <link rel="stylesheet" href="static/ioccc.css">
    <script src="static/ioccc.js" defer></script>
  </head>
  <body>
    <header>
      <div id="logo" style="color: black;"><img src="static/ioccc.png">
	IOCCC Submit Server - Change Password
      </div>
    </header>

    <section id="pageContent">
      <main role="main">
        <article>

          <div>
            {% if current_user.id %}
              <b style="font-size: 20px; color: darkblue;">Status: Logged in as: {{ current_user.id }}</b><br><br>
            {% else %}
              <b style="font-size: 20px; color: darkblue;">Status: Not logged in</b><br><br>
            {% endif %}
          </div>

          {% with messages = get_flashed_messages() %}
            {% if messages %}
              <section>
                <strong>Message(s):</strong>
                <br><br>
                <ul class=flashes>
                  {% for message in messages %}
                    <li>{{ message }}</li>
                  {% endfor %}
                </ul>
                <br>
              </section>
            {% endif %}
          {% endwith %}

	  <p>
	  <strong>You are required to change your password by {{pw_change_by}}</strong>
	      <br><br>
	      Please enter your current password, a new password, and then reenter the same new password.
	      <br><br>
	      <strong>Your password MUST be:</strong>
	      <br><br>
	      <ul>
		  <li> At least <strong>{{min_length}} characters long</strong>
		  <li> At most <strong>{{max_length}} characters long</strong>
		  <li> <strong>NOT contain nor be a subset</strong> of the current password
		  <li> New password must
		      <strong>NOT have been <a href="https://haveibeenpwned.com/Passwords" target="_blank">Pwned</a></strong>
		      <br>
		      <br>
		      <a href="https://haveibeenpwned.com/Passwords" target="_blank">Pwned</a></strong> passwords are
		      passwords that have been previously exposed in some published data breach.
	      </ul>
	  </p>

	  <br>

          {% if current_user.id %}
            <form method="POST" action="/passwd">
              <label for="password"><b style="font-size: 20px;">Current Password: </b></label>
              <input type="text" id="old_password" name="old_password" placeholder="Enter current Password"
                     style="background-color:#AEC6CF; min-width:50%; font-size: 20px; -webkit-text-security: circle">
	      <br><br>
              <label for="password"><b style="font-size: 20px;">New Password: </b></label>
              <input type="text" id="new_password" name="new_password" placeholder="Enter a new password"
                     style="background-color:#AEC6CF; min-width:50%; font-size: 20px; -webkit-text-security: circle">
	      <br><br>
              <label for="password"><b style="font-size: 20px;">Reenter New Password: </b></label>
              <input type="text" id="reenter_new_password" name="reenter_new_password" placeholder="Reenter the new password"
                     style="background-color:#AEC6CF; min-width:50%; font-size: 20px; -webkit-text-security: circle">
	      '<br><br>
              <input type="submit" value="Change Password" class="button"
                     style="background-color:#AEC6CF; min-width:100px; font-size: 20px; font-weight: bold;">
            </form>
          {% endif %}

          <br>

	  <p>
	    After you successfully change your password, you will be required to login with your new password.
	    <br><br>
	    Alternately you may simply logout, however you will be required to change your password after logging back in.
	  </p>

          <br>

          <form action="/logout" method="get" target="_self">
            <input type="submit" value="Logout" class="button"
                   style="background-color:#AEC6CF; min-width:100px; font-size: 20px; font-weight: bold;">
          </form>
        </article>
      </main>
    </section>
    <footer>
      <div id="resources"><h3>Recommended IOCCC resources</h3>
      <ul>
	 <li> <a href="https://ioccc-src.github.io/temp-test-ioccc/index.html">IOCCC Home page</a>
	 <li> <a href="https://ioccc-src.github.io/temp-test-ioccc/status.html">Current status of the IOCCC</a>
	 <li> <a href="https://ioccc-src.github.io/temp-test-ioccc/next/index.html">IOCCC Rules &amp; Guidelines</a>
	 <li> <a href="https://ioccc-src.github.io/temp-test-ioccc/faq.html">IOCCC FAQ</a>
	 <li> <a href="https://ioccc-src.github.io/temp-test-ioccc/contact.html">How to contact the IOCCC</a>
      </ul>
      </div>
      <div id="copyright"><h3>Copyright &copy; 2024 by Landon Curt Noll:
	 <a href="https://creativecommons.org/faq/#what-does-some-rights-reserved-mean"
	    target="_blank"
	    rel="license noopener noreferrer">Some Rights Reserved</a></h3>
      <p>This work is licensed by Landon Curt Noll under
          <b><a href="https://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1"
		target="_blank"
		rel="license noopener noreferrer"
		style="display:inline-block;">CC BY-SA 4.0</a></b>.</p>
      <p>You should <b>carefully review</b> the
	  <b><a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode.en"
		target="_blank"
	        rel="license noopener noreferrer">CC BY-SA 4.0 LEGAL CODE</a></b>
	 before using the licensed material.</p>
      <p>You may wish to review the
      <b><a href="https://ioccc-src.github.io/temp-test-ioccc/license.html"
	    target="_blank"
            rel="license noopener noreferrer">highlights of some of the key features and terms</a></b>.</p>
      </div>
      <div id="powered-by"><h4>Powered by:
         <a href="https://html5-templates.com/"
	    target="_blank"
	    rel="nofollow">HTML5 Templates</a></h4>
      </div>
    </footer>
  </body>
</html>
